performance.mark("js-parse-end:97348-bec80d222fcd7ba6.js");
"use strict";(globalThis.webpackChunk_github_ui_github_ui=globalThis.webpackChunk_github_ui_github_ui||[]).push([["97348"],{471(e,t,r){r.d(t,{_S:()=>s,cB:()=>o,cW:()=>l});var a=r(96551),n=r(95066);let s=()=>{let e=(0,a.JV)().appId;return e&&"rails"!==e?e:crypto.randomUUID()},l=e=>{(0,a.C3)({appId:e})},o=()=>{let e=document.querySelector("react-app")||document.querySelector("projects-v2");return e?.uuid||"rails"};n.cg?.addEventListener("hashchange",()=>{(0,a.C3)({appId:o()})},!0)},8745(e,t,r){r.d(t,{D:()=>o});var a=r(74848),n=r(95813),s=r(38750),l=r(93211);let o=({...e})=>{let{valueType:t}=e,r=e.propertyValue||(0,n.sN)(t);switch(t){case"single_select":return(0,a.jsx)(l.ze,{...e,propertyValue:r});case"multi_select":return(0,a.jsx)(l.az,{...e,propertyValue:r});case"true_false":return(0,a.jsx)(l.ze,{...e,allowedValues:["true","false"],propertyValue:r});case"string":case"url":return(0,a.jsx)(i,{...e,propertyValue:r});default:return null}};o.displayName="CustomPropertyInput";let i=({setRef:e,propertyValue:t,defaultValue:r,propertyName:n,mixed:o,onChange:i,inputProps:u})=>{let c=o?l.ON:r||"";return(0,a.jsx)(s.A,{ref:e,block:!0,"aria-label":n,onChange:e=>i(e.target.value),value:t,placeholder:c,...u})};i.displayName="StringPropertyInput",i.displayName="StringPropertyInput"},93211(e,t,r){r.d(t,{ze:()=>m,ON:()=>p,az:()=>f});var a=r(74848),n=r(95813),s=r(97286),l=r(68695),o=r(38621),i=r(93607),u=r(21373),c=r(39775),d=r(96540);let p="(Mixed)",h={title:"No property values were found",body:"Try searching for a different value for results.",variant:"empty"};function m({setRef:e,propertyName:t,fetchAllowedValuesUrl:r,defaultValue:n,allowedValues:s,propertyValue:l,mixed:o,onChange:u,anchorProps:c}){let d=y({propertyName:t,defaultValue:n,allowedValues:s,mixed:o,initialSelection:l?[l]:[],fetchAllowedValuesUrl:r,anchorProps:c,setRef:e}),p=d.items.find(e=>e.text&&l===e.text);return(0,a.jsx)(i.X,{...d,onSelectedChange:e=>u(e?.text||""),selected:p,message:0===d.items.length?h:void 0})}function f({setRef:e,propertyName:t,defaultValue:r,allowedValues:n,propertyValue:s,mixed:l,onChange:o,anchorProps:u,fetchAllowedValuesUrl:c}){let d=y({propertyName:t,defaultValue:r,allowedValues:n,mixed:l,fetchAllowedValuesUrl:c,initialSelection:s,anchorProps:u,setRef:e}),p=d.items.filter(e=>e.selected);return(0,a.jsx)(i.X,{...d,onSelectedChange:e=>{let{filterValue:t}=d,r=e.map(e=>e.text||"");t?o([...s.filter(e=>!e.toLowerCase().includes(t.toLowerCase())),...r]):o(r)},selected:p,message:0===d.items.length?h:void 0})}function y(e){var t,r,i,h;let m,f,{defaultValue:y,mixed:g,initialSelection:x,anchorProps:v,setRef:b}=e,{data:_,isLoading:j,requestFetch:N}=function({propertyName:e,allowedValues:t,fetchAllowedValuesUrl:r}){let[a,n]=(0,d.useState)(!1),o=r?.(e),{data:i,isLoading:u}=(0,s.I)({queryKey:["queryCustomPropertyAllowedValues",e,o],queryFn:async()=>{let t=await (0,l.lS)(o||"");if(t.ok)return await t.json();throw Error(`${e}: Failed to fetch allowed values.`)},select:e=>e?.allowedValues,enabled:!t&&!!o&&a,initialData:t?{allowedValues:t}:void 0});if(!o&&!t)throw Error(`Allowed values cannot be fetched for ${e}. fetchAllowedValuesUrl is not configured.`);return{data:i,isLoading:u,requestFetch:()=>n(!0)}}(e),V=(0,d.useRef)(null),[A,C]=(0,d.useState)(!1),[P,R]=(0,d.useState)(""),T=(t=(0,d.useMemo)(()=>(_||[]).map(e=>{var t;return t=e,{id:t,text:t,selected:x.includes(e)}}),[_,x]),0===(m=(r=P.toLowerCase())?t.filter(e=>(e.text||"").toLowerCase().includes(r)):t).length?[]:m).filter((f=200,e=>e.selected?(f--,!0):!(f<=0)&&(f--,!0))),S=T.length>7?"medium":"auto",L=(i=x,h=y,g?p:(0,n.sX)(i)?(0,n.sX)(h)?"Choose an option":`Default (${w(h||"")})`:w(i));return{items:T,anchorRef:V,renderAnchor:e=>(0,a.jsx)(u.Q,{block:!0,alignContent:"start",trailingAction:o.TriangleDownIcon,className:"CustomPropertySelectPanel-module__CustomPropertySelectPanelButton__U4ZZE5A",...e,...v,onMouseOver:N,onFocus:N,ref:e=>{V.current=e,b?.(e)},children:(0,a.jsx)(c.A,{maxWidth:"100%",title:L,children:L})}),placeholderText:"Search for values",filterValue:P,open:A,onFilterChange:R,onOpenChange:e=>{C(e),R("")},loading:j,overlayProps:{height:S,width:"medium"}}}function w(e){return(0,n.OD)(e)?e.length<=1?e[0]||"":`${e.length} selected`:e}m.displayName="CustomPropertySingleSelectPanel",f.displayName="CustomPropertyMultiSelectPanel"},55322(e,t,r){r.d(t,{o:()=>T});var a=r(74848),n=r(96540),s=r(9883),l=r(95813),o=r(32764),i=r(38621),u=r(7624),c=r(46251),d=r(83223),p=r(39656),h=r(39775),m=r(45596),f=r(26108),y=r(18990),w=r(34164),g=r(55332),x=r(8745);let v="PropertiesValuesTableRows-module__tableRow__WSvW6as",b="PropertiesValuesTableRows-module__propertyLabel__aLaZT75",_="PropertiesValuesTableRows-module__propertyDescription__UjGijBW";function j(e){let{propertyField:t,definition:r,showUndo:n,fetchAllowedValuesUrl:s,setRef:l,required:o}=e,{value:i,changed:c=!1,mixed:d=!1,error:p}=t||{},{propertyName:h,description:m}=r,f=`${h}-validation-error`,y=t=>e.onChange(h,t);return(0,a.jsx)(P,{className:v,children:(0,a.jsx)(R,{label:h,description:m,required:o,value:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"PropertiesValuesTableRows-module__controlsContainer__vuhUWku",children:(0,a.jsx)(x.D,{setRef:l,...r,propertyValue:i,mixed:d,onChange:y,inputProps:p?{"aria-describedby":f}:{},fetchAllowedValuesUrl:s})}),p&&(0,a.jsx)(u.A.Validation,{variant:"error",id:f,className:"PropertiesValuesTableRows-module__FormControl_Validation__B7HAJDa",children:p})]}),trailing:(0,a.jsx)(C,{definition:r,changed:c,onReset:()=>e.onReset(h),onChange:y,showUndo:n})})})}function N({propertyField:e,definition:t,required:r}){let{description:n,propertyName:s}=t,l=(0,g.s)(t,e?.value);return(0,a.jsx)(P,{className:v,children:(0,a.jsx)(R,{required:r,label:s,description:n,value:(0,a.jsxs)(c.B,{direction:"horizontal",gap:"condensed",children:[(0,a.jsx)(c.B.Item,{shrink:!1,children:(0,a.jsx)(i.ShieldLockIcon,{size:"small"})}),(0,a.jsx)(c.B.Item,{children:(0,a.jsx)("span",{children:l})})]})})})}function V({propertyField:e,definition:t,managedBySource:r,required:n}){let{description:s}=t;return(0,a.jsx)(P,{className:v,children:(0,a.jsx)(R,{required:n,label:t.propertyName,description:s,value:(0,a.jsx)(A,{propertyValue:e?.value||t.defaultValue||"",definition:t}),bottomMessage:r&&(0,a.jsxs)("div",{className:"d-inline",children:[(0,a.jsxs)("span",{className:"fg-muted",children:[(0,a.jsx)(i.ShieldLockIcon,{size:"small"})," Managed by"," "]}),(0,a.jsx)(d.A,{inline:!0,href:"org"===r.type?(0,o.p3r)({owner:r.slug}):(0,o.t4j)({slug:r.slug}),children:r.name})]})})})}function A({propertyValue:e,definition:t}){if((0,l.sX)(e))return(0,a.jsx)("span",{className:"fg-muted",children:"(Empty)"});switch(t.valueType){case"single_select":case"true_false":return(0,a.jsx)(p.A,{text:(0,a.jsx)(h.A,{title:e,maxWidth:"100%",children:e}),className:"PropertiesValuesTableRows-module__propertyToken___xK_PuK"});case"multi_select":return(0,a.jsx)(a.Fragment,{children:e.map(e=>(0,a.jsx)(p.A,{text:(0,a.jsx)(h.A,{title:e,maxWidth:"100%",children:e}),className:"PropertiesValuesTableRows-module__spacedPropertyToken__CUTEotY"},e))});case"string":case"url":return(0,a.jsx)(h.A,{title:e,maxWidth:"100%",children:e})}}function C({definition:e,changed:t,showUndo:r=!0,onReset:n,onChange:s}){let{propertyName:l,required:o,source:u}=e,c=`Undo ${l} changes`,d=`Reset ${l} to default value`;return(0,a.jsxs)(m.W,{children:[(0,a.jsx)(m.W.Anchor,{children:(0,a.jsx)(f.K,{icon:i.KebabHorizontalIcon,variant:"invisible","aria-label":`Open reset options for ${l}`,description:"Reset options"})}),(0,a.jsx)(m.W.Overlay,{width:"small",children:(0,a.jsxs)(y.l,{children:[r&&(0,a.jsxs)(y.l.Item,{onSelect:n,"aria-label":c,inactiveText:t?void 0:"No change to undo",children:[(0,a.jsx)(y.l.LeadingVisual,{children:(0,a.jsx)(i.UndoIcon,{})}),(0,a.jsx)("span",{className:b,children:"Undo"}),(0,a.jsx)("span",{className:_,children:"Reset to the last used value"})]}),o&&(0,a.jsxs)(y.l.Item,{onSelect:()=>s(""),"aria-label":d,children:[(0,a.jsx)(y.l.LeadingVisual,{children:(0,a.jsx)(i.SyncIcon,{})}),(0,a.jsx)("span",{className:b,children:"Reset to default"}),(0,a.jsxs)("span",{className:_,children:["Inherit the value defined by the ","business"===u.type?"enterprise":"organization"]})]})]})})]})}function P(e){return(0,a.jsx)("div",{"data-testid":"property-row",className:(0,w.$)("PropertiesValuesTableRows-module__propertyRow__Q_Z1gse",e.className),children:e.children})}function R({label:e,description:t,bottomMessage:r,value:n,trailing:s,required:l}){return(0,a.jsxs)(u.A,{required:l,className:(0,w.$)("PropertiesValuesTableRows-module__FormControl__sZJCMN9",r&&"PropertiesValuesTableRows-module__hasBottomMessage__xDCX2S3"),children:[(0,a.jsx)(u.A.Label,{"data-testid":"property-name",className:"PropertiesValuesTableRows-module__FormControl_Label__zmJyMvF",children:e}),(0,a.jsx)("div",{className:"PropertiesValuesTableRows-module__formInputArea__Pt1mrTk",children:n}),s?(0,a.jsx)("div",{className:"PropertiesValuesTableRows-module__actionButtonsArea__RFtPRhZ",children:s}):null,t&&(0,a.jsx)(u.A.Caption,{className:"PropertiesValuesTableRows-module__FormControl_Caption__X8JCIU4",children:t}),r?(0,a.jsx)("div",{className:"PropertiesValuesTableRows-module__formMessageArea__EQ0Lnvn",children:r}):null]})}j.displayName="EditValueRow",j.displayName="EditValueRow",N.displayName="FormReadValueRow",V.displayName="ReadValueRow",A.displayName="DisplayPropertyValue",C.displayName="ResetDropdown",P.displayName="PropertyValueRowContainer",R.displayName="DataTableRow";let T=e=>{let{definitions:t,propertyValuesMap:r,rowRenderer:l,ref:o}=e,{getRef:i,setRef:u}=(0,s.u)();return((0,n.useImperativeHandle)(o,()=>({focusInput:e=>{i(e)?.focus()}})),0===t.length)?null:(0,a.jsx)("div",{children:t.map(e=>{let{propertyName:t}=e,s=r[t];return(0,a.jsx)(n.Fragment,{children:l({definition:e,propertyField:s},u(t))},t)})})};T.displayName="PropertiesValuesTable",T.displayName="PropertiesValuesTable",T.EditValueRow=j,T.ReadValueRow=V,T.FormReadValueRow=N,T.ValueRowContainer=P},65498(e,t,r){r.d(t,{w4:()=>j,u1:()=>b,sq:()=>d,EI:()=>_,AA:()=>h,_0:()=>w,Jj:()=>p,ov:()=>m});let a=["true","false"];var n=r(95813),s=r(32764),l=r(23900),o=r(68695);let i=/[^a-zA-Z0-9_#$-]/gu,u=/[^ -!#-~]/gu,c={maxPropertyValueLength:75,maxUrlPropertyValueLength:200};function d(e,t){if(e.length>75)return"Name cannot be longer than 75 characters";if(0===e.length)return"Name is required";for(let r of t)if(r.toLowerCase()===e.toLowerCase())return"Name already exists";let r=x(e,i);if(r)return`Name contains invalid characters: ${r}`}async function p(e,t){let r="Could not check property name";try{let a=await (0,o.lS)((0,s.wYU)({sourceName:e,propertyName:t}));if(a.ok){let{status:e,orgConflicts:r}=await a.json();switch(e){case"valid":return;case"already_exists":return{message:"Name already exists"};case"exists_in_business_orgs":return{message:`The property ${t} already exists in this enterprise`,orgConflicts:r}}}return{message:r}}catch{return{message:r}}}function h(e,t,r){let a=r||c,n=e.trim().toLowerCase();if(n.length>a.maxPropertyValueLength)return`Option cannot be longer than ${a.maxPropertyValueLength} characters`;if(0===n.length)return"Option cannot be empty";if(t.has(e))return"Option already exists";if(function(e,t){for(let r of t)if(r.toLowerCase()===e)return!0;return!1}(n,t))return"Option already exists";let s=x(e,u);if(s)return`Option contains invalid characters: ${s}`}function m(e){if(e.length>255)return"Description cannot be longer than 255 characters"}let f="Invalid value type",y="Default value should be a valid option";async function w(e,t,r,s=[],l,o){if(r){if(!e.length)return"Cannot be empty for a required property";switch(t){case"single_select":if((0,n.OD)(e))return f;if(!s.includes(e))return y;break;case"true_false":if((0,n.OD)(e))return f;if(!a.includes(e))return y;break;case"multi_select":if(!(0,n.OD)(e))return f;if(!e.every(e=>s.includes(e)))return y;break;case"string":if((0,n.OD)(e))return f;return await g(e,!1,l,o);case"url":if((0,n.OD)(e))return f;return await g(e,!0,l,o)}}}async function g(e,t,r,a){if(!e)return;let n=a||c,s=t?n.maxUrlPropertyValueLength:n.maxPropertyValueLength;if(e.length>s)return`Cannot be longer than ${s} characters`;let o=x(e,u);if(o)return`Contains invalid characters: ${o}`;if(t){let t;try{t=new URL(e)}catch{return"Invalid URL format"}if(!["http:","https:"].includes(t.protocol))return"URL scheme must be http or https";if(t.username||t.password)return"URL username/password are not allowed";if(!t.host)return"URL host must be present"}if(r&&!await (0,l.N)(r,e))return"Value does not match pattern"}function x(e,t){let r=Array.from(e.matchAll(t));return r?Array.from(new Set(r.map(e=>" "===e[0]?"whitespace":e[0]))).join(", "):""}let v="This property cannot be empty",b=(e,t)=>{let r=new Map(e.map(e=>[e.propertyName,e.regex||void 0])),a=new Set(e.filter(e=>"url"===e.valueType).map(e=>e.propertyName));return async(e,s)=>s&&!(0,n.OD)(s)&&await g(s,a.has(e),r.get(e),t)},_=(e,t)=>{let r=new Map(e.map(e=>[e.propertyName,e])),a=new Set(e.filter(e=>"url"===e.valueType).map(e=>e.propertyName));return async(e,s)=>{let l=r.get(e);if(l)return V(l,s)?v:s&&!(0,n.OD)(s)&&await g(s,a.has(e),l.regex||void 0,t)}},j=(e,t,r)=>{let a=new Map(t.map(e=>[e.propertyName,e])),n={};for(let[t,s]of Object.entries(e)){let l=a.get(t),o=e[t]?.value;l&&!(s.mixed&&N(t,r))&&V(l,o)&&(n[t]=v)}return n},N=(e,t)=>t.every(t=>!!t[e]?.length),V=(e,t)=>e.requireExplicitValues&&!t?.length},55332(e,t,r){r.d(t,{s:()=>a});let a=(e,t)=>t||(e.defaultValue?`Default (${n(e.defaultValue)})`:""),n=e=>Array.isArray(e)?e.join(", "):e},59271(e,t,r){r.d(t,{w:()=>l,x:()=>i});var a=r(95813),n=r(64887),s=r(96540);function l({propertyValues:e,editableDefinitions:t,propertyValueValidator:r},i=[]){let[u,c]=(0,s.useState)(()=>o(e,t)),[d,p]=(0,s.useState)({}),[h,m]=(0,s.useState)({});(0,s.useEffect)(()=>{m({}),c(o(e,t))},i);let f=(0,s.useCallback)(async(e,t)=>{let a=await r(e,t),n={...d};delete n[e],a&&(n[e]=a),p(n)},[d,r]),y=(0,n.d)(f,300,{onChangeBehavior:"cancel"});return{propertyValuesMap:(0,s.useMemo)(()=>{let e=Object.entries({...u,...h}).reduce((e,[t,r])=>{let n=u[t],s=t in h;if(!s&&n?.mixed)e[t]={propertyName:t,changed:!1,mixed:!0};else{let l=s&&(n?.mixed||!(0,a.tE)(n?.value,r.value)),o=s?r.value:n?.value;e[t]={value:o,changed:l,propertyName:t,mixed:!1}}return e},{});for(let t of Object.entries(d)){let[r,a]=t,n=e[r];n&&(n.error=a)}return e},[h,u,d]),setPropertyValue:function(e,t){m({...h,[e]:{value:t}}),y(e,t)},revertPropertyValue:function(e){let t={...h};delete t[e],m(t);let r={...d};delete r[e],p(r)},discardChanges:function(){m({})},commitChanges:function(){let e=Object.entries(h).reduce((e,[t,r])=>(e[t]={value:r.value},e),{});c({...u,...e}),m({})},propertyValuesErrors:e=>{p({...d,...e})}}}function o(e,t){let r={},n={};for(let t of e)for(let[e,s]of Object.entries(t)){let t=r[e];t?(0,a.tE)(t.value,s)||(r[e]={mixed:!0}):r[e]={value:s},n[e]||(n[e]=0),n[e]++}for(let[t,a]of Object.entries(n))r[t]&&a<e.length&&(r[t]={mixed:!0});for(let{propertyName:e}of t)r[e]||(r[e]={value:void 0});return r}function i(e,t){return e.reduce((e,r)=>{let n=t[r.propertyName];return n?.changed&&(e[r.propertyName]=n.value||(0,a.sN)(r.valueType)),e},{})}},9883(e,t,r){r.d(t,{u:()=>n});var a=r(96540);function n(){let e=(0,a.useRef)({}),t=(0,a.useCallback)(t=>r=>{e.current[t]=r},[]);return{getRef:(0,a.useCallback)(t=>e.current[t]||null,[]),setRef:t}}},95813(e,t,r){function a(e){return Array.isArray(e)}function n(e){return!e||0===e.length}function s(e){return"multi_select"===e?[]:""}function l(e,t){return Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((e,r)=>e===t[r]):e===t}r.d(t,{OD:()=>a,sN:()=>s,sX:()=>n,tE:()=>l})},90023(e,t,r){r.d(t,{r:()=>n});var a=r(21744);async function n(e){let t=document.querySelector("#site-details-dialog").content.cloneNode(!0),r=t.querySelector("details"),n=r.querySelector("details-dialog"),s=r.querySelector(".js-details-dialog-spinner");e.detailsClass&&r.classList.add(...e.detailsClass.split(" ")),e.dialogClass&&n.classList.add(...e.dialogClass.split(" ")),e.label?n.setAttribute("aria-label",e.label):e.labelledBy&&n.setAttribute("aria-labelledby",e.labelledBy),document.body.append(t);try{let t=await e.content;s.remove(),n.prepend(t)}catch{s.remove();let t=document.createElement("span");t.textContent=e.errorMessage||"Couldn't load the content",t.classList.add("my-6"),t.classList.add("mx-4"),n.prepend(t)}return r.addEventListener("toggle",()=>{r.hasAttribute("open")||((0,a.h)(n,"dialog:remove"),r.remove())}),n}},59607(e,t,r){r.d(t,{Ee:()=>o,Ts:()=>l,b4:()=>i});var a=r(68319),n=r(65691),s=r(33455);async function l(e,t,r){let l=new Request(t,r);(0,s.tV)(l.headers);let o=await self.fetch(l);if(o.status<200||o.status>=300)throw Error(`HTTP ${o.status}${o.statusText||""}`);return(0,a.A)((0,a.K)(e),o),(0,n.B)(e,await o.text())}function o(e,t,r=1e3,a=[200],n=[202]){return async function r(l){let o=new Request(e,t);(0,s.tV)(o.headers);let i=await self.fetch(o);if(n.includes(i.status))return await new Promise(e=>setTimeout(e,l)),r(1.5*l);if(a.includes(i.status))return i;if(i.status<200||i.status>=300)throw Error(`HTTP ${i.status}${i.statusText||""}`);throw Error(`Unexpected ${i.status} response status from poll endpoint`)}(r)}async function i(e,t,r){let{wait:a=500,acceptedStatusCodes:n=[200],max:l=3,attempt:o=0}=r||{},u=async()=>new Promise((r,i)=>{setTimeout(async()=>{try{let a=new Request(e,t);(0,s.tV)(a.headers);let i=await self.fetch(a);if(n.includes(i.status)||o+1===l)return r(i);r("retry")}catch(e){i(e)}},a*o)}),c=await u();return"retry"!==c?c:i(e,t,{wait:a,acceptedStatusCodes:n,max:l,attempt:o+1})}},68319(e,t,r){r.d(t,{A:()=>l,K:()=>n});var a=r(50467);function n(e){let t=[...e.querySelectorAll("meta[name=html-safe-nonce]")].map(e=>e.content);if(t.length<1)throw Error("could not find html-safe-nonce on document");return t}let s=class ResponseError extends Error{constructor(e,t){super(`${e} for HTTP ${t.status}`),(0,a._)(this,"response",void 0),this.response=t,this.name="ResponseError"}};function l(e,t,r=!1){let a=t.headers.get("content-type")||"";if(!r&&!a.startsWith("text/html"))throw new s(`expected response with text/html, but was ${a}`,t);if(r&&!(a.startsWith("text/html")||a.startsWith("application/json")))throw new s(`expected response with text/html or application/json, but was ${a}`,t);let n=t.headers.get("x-html-safe");if(n){if(!e.includes(n))throw new s("response X-HTML-Safe nonce did not match",t)}else throw new s("missing X-HTML-Safe nonce",t)}},35033(e,t,r){r.d(t,{A:()=>a});let a=(e,t)=>{let r=new URL(e,window.location.origin),a=new URL(t,window.location.origin);return a.href.includes("#")&&r.host===a.host&&r.pathname===a.pathname&&r.search===a.search}},65691(e,t,r){r.d(t,{B:()=>a});function a(e,t){let r=e.createElement("template");return r.innerHTML=t,e.importNode(r.content,!0)}},4543(e,t,r){r.d(t,{Ax:()=>n.Ax,JW:()=>s,ZV:()=>n.ZV});var a=r(33455),n=r(13937);function s(e,t){(0,n.JW)(e,async(e,r,n)=>((0,a.tV)(n.headers),t(e,r,n)))}},36054(e,t,r){r.d(t,{$:()=>s,O:()=>i});var a=r(68695),n=r(96540);function s(e,t){let[r,a]=(0,n.useState)("UNKNOWN");return{isValid:"VALID"===r,showError:"INVALID"===r,validate:async(r,n={})=>{if(a("UNKNOWN"),!t)return!0;let s=await l(r,`${e}/${t}`,n);return a(s),o(s)},reset:(e=!1)=>{a(e?"VALID":"UNKNOWN")}}}let l=async(e,t,r)=>{let n=await (0,a.lS)(t,{...r,method:"POST",body:e});if(n.ok){let{valid:e}=await n.json();return e?"VALID":"INVALID"}return 400===n.status?"INVALID":"UNKNOWN"},o=e=>{switch(e){case"VALID":case"UNKNOWN":return!0;case"INVALID":return!1}},i=async(e,t)=>o(await l(e,t))},23900(e,t,r){r.d(t,{N:()=>s});var a=r(32764),n=r(36054);let s=async(e,t)=>!(e?.length&&t?.length)||await (0,n.O)({pattern:e,value:t},(0,a.ygX)())},84551(e,t,r){r.d(t,{Ay:()=>h,YU:()=>d,nA:()=>m});var a=r(90023),n=r(59607),s=r(4543),l=r(8847),o=r(33455);let i=!1;async function u(){let e=document.querySelector("link[rel=sudo-modal]"),t=document.querySelector(".js-sudo-prompt");if(t instanceof HTMLTemplateElement)return t;if(e){let t,r,a=await (0,n.Ts)(document,((r=new URLSearchParams((t=new URL(e.href,window.location.origin)).search.slice(1))).set("webauthn-support",(0,l.K)()),t.search=r.toString(),t.toString()));return document.body.appendChild(a),document.querySelector(".js-sudo-prompt")}throw Error("couldn't load sudo prompt")}let c=!1;async function d(e){if(i)return!1;i=!0,c=!1;let t=(await u()).content.cloneNode(!0),r=await (0,a.r)({content:t}),n=e?.closest("details[open]");return n&&n.removeAttribute("open"),await new Promise(e=>{r.addEventListener("dialog:remove",function(){n&&n.setAttribute("open","open"),i=!1,e()},{once:!0})}),c}async function p(e,t,r="Sudo authentication failed.",a="Too many authentication attempts. Please try again later.",n=".js-sudo-error",s){try{await t.text()}catch(l){let t;if(!l.response)throw l;switch(l.response.status){case 401:t=r;break;case 429:t=a;break;default:t="An unknown error occurred. Please try again later."}if(e.querySelector(n).textContent=t,e.querySelector(n).hidden=!1,s&&(e.querySelector(s).value=""),401!==l.response.status&&429!==l.response.status)throw l;return}c=!0,e.closest("details").removeAttribute("open")}async function h(e){let t=await fetch("/sessions/in_sudo",{headers:{accept:"application/json",...(0,o.kt)()}});return!!t.ok&&"true"===await t.text()||d(e)}async function m(){let e=await fetch("/sessions/in_sudo",{headers:{accept:"application/json",...(0,o.kt)()}});return!!e.ok&&"true"===await e.text()||!1}(0,s.JW)(".js-sudo-webauthn-form",async function(e,t){await p(e,t)}),(0,s.JW)(".js-sudo-github-mobile-form",async function(e,t){await p(e,t)}),(0,s.JW)(".js-sudo-totp-form",async function(e,t){await p(e,t,void 0,void 0,".flash-error","#totp")}),(0,s.JW)(".js-sudo-email-form",async function(e,t){await p(e,t,void 0,void 0,".flash-error","#email")}),(0,s.JW)(".js-sudo-password-form",async function(e,t){await p(e,t,"Incorrect password.","Too many password attempts. Please wait and try again.",void 0,".js-sudo-password")})},64887(e,t,r){r.d(t,{d:()=>l});var a=r(5875),n=r(52246),s=r(96540);let l=(e,t,{leading:r=!1,maxWait:l,trailing:o=!0,onChangeBehavior:i="flush"}={})=>{let u=(0,a.M)(e),c=(0,s.useMemo)(()=>{let e=void 0===l?{leading:r,trailing:o}:{leading:r,trailing:o,maxWait:l};return(0,n.A)((...e)=>u.current(...e),t,e)},[u,t,r,l,o]);return(0,s.useEffect)(()=>()=>{c?.[i]()},[c,i]),c}},1703(e,t,r){r.d(t,{Z:()=>c,o:()=>d});var a=r(16522),n=r(96540),s=r(3433),l=r(35033),o=r(40708),i=r(59230),u=r(29370);let c=()=>{let{routes:e}=n.use(u.k),t=(0,s.Zp)();return n.useCallback((a,u={})=>{let c=(0,s.o1)(a).pathname;if(!(0,s.ue)(e,c)||u.reloadDocument){let e="string"==typeof a?a:(0,s.AO)(a);u.preventTurbo?window.location.href=e:(async()=>{let{softNavigate:t}=await Promise.all([r.e("26533"),r.e("23204")]).then(r.bind(r,82735));t(e)})()}else{(0,l.A)(location.href,a.toString())||(0,o.SC)("react");let{preventAutofocus:e,...r}=u;(0,n.startTransition)(()=>{t(a,e?{...r,state:{[i.V]:!0,...r.state}}:r)})}},[t,e])},d=()=>{let e,t,r=(0,a.c)(7),[n]=(0,s.ok)(),l=c(),{pathname:o}=(0,s.zy)();r[0]!==l||r[1]!==o||r[2]!==n?(e=(e,t)=>{l({pathname:o,search:(0,s.PI)("function"==typeof e?e(n):e).toString()},void 0===t?{}:t)},r[0]=l,r[1]=o,r[2]=n,r[3]=e):e=r[3];let i=e;return r[4]!==n||r[5]!==i?(t=[n,i],r[4]=n,r[5]=i,r[6]=t):t=r[6],t}},8847(e,t,r){r.d(t,{K:()=>n,e:()=>s});var a=r(74043);function n(){return(0,a.$j)()?"supported":"unsupported"}async function s(){return await window.PublicKeyCredential?.isUserVerifyingPlatformAuthenticatorAvailable()?"supported":"unsupported"}}}]);
//# sourceMappingURL=97348-bec80d222fcd7ba6-fe0ed0471c400350.js.map